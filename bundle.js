!function(){"use strict";var n;function e(e,t,a){var r="<table border=1>".concat(t.map((function(e,t){return"<tr>".concat(e.map((function(e,a){return r=t,c=e,"<td data-x=".concat(a," data-y=").concat(r,' class="cell cell--').concat(function(e){switch(e){case n.ALIVE:return"alive";case n.DEAD:return"dead";case n.DOOMED:return"doomed"}}(c),'"></td>');var r,c})).join(""),"</tr>")})).join(""),"</table>");e.innerHTML=r,e.querySelector("table").addEventListener("click",(function(n){var e=n.target;if("TD"===e.tagName){var t=Number(e.getAttribute("data-x")),r=Number(e.getAttribute("data-y"));t>=0&&r>=0&&a(t,r)}}))}!function(n){n[n.DEAD=0]="DEAD",n[n.ALIVE=1]="ALIVE",n[n.DOOMED=2]="DOOMED"}(n||(n={}));var t=function(n,e,t){var a=n[t];if(void 0===a)return 0;var r=a[e];return void 0===r?0:Number(r)};function a(e){return e===n.ALIVE}function r(r,c,o){var i,l=!1,u=r,s=c;o.classList.add("game"),o.innerHTML='\n    \n    <div class="game__controls">\n        <div class="game__controls-item">\n          <label>\n            <input type="number" min="'.concat(1e3,'" step="1000" class="game__speed" value="').concat(2e3,'"/>\n            game speed\n          </label>\n        </div>\n        <div class="game__controls-item">\n          <label>\n            <input type="number" min="').concat(3,'" class="game__rows" value="').concat(u,'"/>\n            rows\n          </label>\n        </div>\n        <div class="game__controls-item">\n          <label>\n            <input type="number" min="').concat(3,'" class="game__cols" value="').concat(s,'"/>\n            cols\n          </label>\n        </div>\n        <div class="game__controls-item">\n            <button class="game__random-fill-btn">Random fill</button>\n        </div>\n        <div class="game__controls-item">\n            <button class="game__run-btn">Start</button>\n        </div>\n    </div>\n    <div class="game__field"></div>\n    <hr>\n');for(var v=o.querySelector(".game__field"),d=o.querySelector(".game__run-btn"),m=o.querySelector(".game__random-fill-btn"),f=o.querySelector(".game__speed"),g=o.querySelector(".game__rows"),_=o.querySelector(".game__cols"),p=[],b=0;b<s;b++){for(var D=[],E=0;E<u;E++)D.push(0);p.push(D)}var h=function t(a,r){p[r][a]=p[r][a]===n.DEAD?n.ALIVE:n.DEAD,e(v,p,t)};function A(){l=!1,d.innerHTML="Start",clearInterval(i)}function L(){l=!0,d.innerHTML="Stop";var r=parseInt(f.value);i=function(r){return Number(setInterval((function(){p=function(e){return e.map((function(r,c){return r.map((function(r,o){var i,l,u=function(e,a,r){for(var c=0,o=e-1;o<=e+1;o+=1)c+=t(r,o,a-1)===n.DEAD?0:1;for(var i=e-1;i<=e+1;i+=1)c+=t(r,i,a+1)===n.DEAD?0:1;return(c+=t(r,e-1,a)===n.DEAD?0:1)+(t(r,e+1,a)===n.DEAD?0:1)}(o,c,e);return i=t(e,o,c),3===(l=u)||2===l&&a(i)?n.ALIVE:a(i)&&(l<2||l>3)?n.DOOMED:n.DEAD}))}))}(p),e(v,p,h),function(n){for(var e=0;e<n.length;e+=1)for(var t=n[e],a=0;a<t.length;a+=1)if(t[a])return!0;return!1}(p)||(alert("Death on the block"),A())}),r))}(r)}e(v,p,h),d.addEventListener("click",(function(){l?A():L()})),m.addEventListener("click",(function(){for(var n=0;n<p.length;n++)for(var t=0;t<p[n].length;t++)p[n][t]=Math.random()>=.5?1:0;e(v,p,h)})),f.addEventListener("change",(function(n){var e=n.target,t=parseInt(e.value),a=parseInt(e.min);t<a&&(e.value="".concat(a)),l&&(A(),L())})),g.addEventListener("change",(function(n){var t=n.target,a=parseInt(t.value),r=parseInt(t.min);if(a<r&&(a=r,t.value="".concat(r)),a>p.length)for(var c=a-s;c>0;c--){for(var o=[],i=0;i<u;i++)o.push(0);p.push(o)}else p.splice(a-s);s=a,e(v,p,h)})),_.addEventListener("change",(function(n){var t=n.target,a=parseInt(t.value),r=parseInt(t.min);a<r&&(a=r,t.value="".concat(r));for(var c=0;c<s;c++)p[c].length<a?p[c].push(0):p[c].splice(a-u);u=a,e(v,p,h)}))}var c=document.createElement("div"),o=document.createElement("div");document.body.appendChild(c),document.body.appendChild(o),r(3,3,c),r(10,10,o)}();