!function(){"use strict";var e;function n(n,t,r){var a="<table border=1>".concat(t.map((function(n,t){return"<tr>".concat(n.map((function(n,r){return a=t,c=n,"<td data-x=".concat(r," data-y=").concat(a,' class="cell cell--').concat(function(n){switch(n){case e.ALIVE:return"alive";case e.DEAD:return"dead";case e.DOOMED:return"doomed"}}(c),'"></td>');var a,c})).join(""),"</tr>")})).join(""),"</table>");n.innerHTML=a,n.querySelector("table").addEventListener("click",(function(e){var n=e.target,t=Number(n.getAttribute("data-x")),a=Number(n.getAttribute("data-y"));t>=0&&a>=0&&r(t,a)}))}!function(e){e[e.DEAD=0]="DEAD",e[e.ALIVE=1]="ALIVE",e[e.DOOMED=2]="DOOMED"}(e||(e={}));var t=function(e,n,t){var r=e[t];if(void 0===r)return 0;var a=r[n];return void 0===a?0:Number(a)};function r(n){return n===e.ALIVE}function a(a,c,o){var l,i=!1,u=a,s=c;o.classList.add("game"),o.innerHTML='\n    \n    <div class="game__controls">\n        <div class="game__controls-item">\n          <label>\n            <input type="number" class="game__speed" value="'.concat(2e3,'"/>\n            game speed\n          </label>\n        </div>\n        <div class="game__controls-item">\n          <label>\n            <input type="number" class="game__rows" value="').concat(u,'"/>\n            rows\n          </label>\n        </div>\n        <div class="game__controls-item">\n          <label>\n            <input type="number" class="game__cols" value="').concat(s,'"/>\n            cols\n          </label>\n        </div>\n        <div class="game__controls-item">\n            <button class="game__random-fill-btn">Random fill</button>\n        </div>\n        <div class="game__controls-item">\n            <button class="game__run-btn">Start</button>\n        </div>\n    </div>\n    <div class="game__field"></div>\n    <hr>\n');for(var d=o.querySelector(".game__field"),v=o.querySelector(".game__run-btn"),m=o.querySelector(".game__random-fill-btn"),f=o.querySelector(".game__speed"),_=o.querySelector(".game__rows"),g=o.querySelector(".game__cols"),b=[],D=0;D<s;D++){for(var E=[],p=0;p<u;p++)E.push(0);b.push(E)}var h=function t(r,a){b[a][r]=b[a][r]===e.DEAD?e.ALIVE:e.DEAD,n(d,b,t)};function A(){i=!1,v.innerHTML="Start",clearInterval(l)}function L(){i=!0,v.innerHTML="Stop";var a=Number(f.value);l=function(a){return Number(setInterval((function(){b=function(n){return n.map((function(a,c){return a.map((function(a,o){var l,i,u=function(n,r,a){for(var c=0,o=n-1;o<=n+1;o+=1)c+=t(a,o,r-1)===e.DEAD?0:1;for(var l=n-1;l<=n+1;l+=1)c+=t(a,l,r+1)===e.DEAD?0:1;return(c+=t(a,n-1,r)===e.DEAD?0:1)+(t(a,n+1,r)===e.DEAD?0:1)}(o,c,n);return l=t(n,o,c),3===(i=u)||2===i&&r(l)?e.ALIVE:r(l)&&(i<2||i>3)?e.DOOMED:e.DEAD}))}))}(b),n(d,b,h),function(e){for(var n=0;n<e.length;n+=1)for(var t=e[n],r=0;r<t.length;r+=1)if(t[r])return!0;return!1}(b)||(alert("Death on the block"),A())}),a))}(a)}n(d,b,h),v.addEventListener("click",(function(){i?A():L()})),m.addEventListener("click",(function(){for(var e=0;e<b.length;e++)for(var t=0;t<b[e].length;t++)b[e][t]=Math.random()>=.5?1:0;n(d,b,h)})),f.addEventListener("change",(function(){i&&(A(),L())})),_.addEventListener("change",(function(e){var t=e.target,r=Number(t.value);if(r>b.length)for(var a=r-s;a>0;a--){for(var c=[],o=0;o<u;o++)c.push(0);b.push(c)}else b.splice(r-s);s=r,n(d,b,h)})),g.addEventListener("change",(function(e){for(var t=e.target,r=Number(t.value),a=0;a<s;a++)b[a].length<r?b[a].push(0):b[a].splice(r-u);u=r,n(d,b,h)}))}var c=document.createElement("div"),o=document.createElement("div");document.body.appendChild(c),document.body.appendChild(o),a(3,3,c),a(10,10,o)}();