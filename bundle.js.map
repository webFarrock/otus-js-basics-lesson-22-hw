{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://otus-js-basics-lesson-12-hw/./src/js/types.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/drawField.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/getCellState.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/getNewCellState.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/createGameOfLife.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/getNextState.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/getNumOfAliveNeighbours.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/isAnyoneAlive.ts","webpack://otus-js-basics-lesson-12-hw/./src/js/index.ts"],"sourcesContent":["export enum cellState {\n  DEAD = 0,\n  ALIVE,\n  DOOMED,\n}\n\nexport type tField = number[][];\nexport type tRow = cellState[];\nexport interface iOnCellClick {\n  (x: number, y: number): void;\n}\n\nexport interface iRunInterval {\n  (speed: number): number;\n}\n\nexport interface iGetCellState {\n  (field: tField, x: number, y: number): number;\n}\n\nexport interface iAliveNeighboursNum {\n  (column: number, row: number, field: tField): number;\n}\n\nexport interface iNextState {\n  (field: tField): tField;\n}\n","import { cellState, iOnCellClick, tField, tRow } from \"./types\";\n\n/**\n * отрисовка поля\n * @param htmlElement {HTMLElement} - элемент, в котором будет отрисовано поле\n * @param field {number[][]} - состояние поля\n * @param onCellClick {(x: number, y: number) => void}\n * @returns void\n */\nfunction drawCell(x: number, y: number, state: cellState): string {\n  return `<td data-x=${x} data-y=${y} class=\"cell cell--${getCellCls(state)}\"></td>`;\n}\n\nfunction getCellCls(state: cellState): string {\n  switch (state) {\n    case cellState.ALIVE:\n      return \"alive\";\n    case cellState.DEAD:\n      return \"dead\";\n    case cellState.DOOMED:\n      return \"doomed\";\n  }\n}\n\nexport function drawField(htmlElement: HTMLElement, field: tField, onCellClick: iOnCellClick) {\n  const rowIterator = (row: tRow, rowIndex: number) => {\n    return `<tr>${row\n      .map((cell: cellState, columnIndex) => {\n        return drawCell(columnIndex, rowIndex, cell);\n      })\n      .join(\"\")}</tr>`;\n  };\n\n  const table = `<table border=1>${field.map(rowIterator).join(\"\")}</table>`;\n\n  // eslint-disable-next-line no-param-reassign\n  htmlElement.innerHTML = table;\n  const elTable = htmlElement.querySelector(\"table\") as HTMLElement;\n\n  elTable.addEventListener(\"click\", (ev) => {\n    const clickedElement = ev.target as HTMLElement;\n\n    if (clickedElement.tagName !== \"TD\") {\n      return;\n    }\n\n    const x = Number(clickedElement.getAttribute(\"data-x\"));\n    const y = Number(clickedElement.getAttribute(\"data-y\"));\n    if (x >= 0 && y >= 0) {\n      onCellClick(x, y);\n    }\n  });\n}\n","import { iGetCellState, tField } from \"./types\";\n\n/**\n * получить состояние клетки\n * @param field {number[][]} - состояние поля\n * @param x {number} - номер колонки\n * @param y {number} - номер строки\n * @return number\n */\n\nexport const getCellState: iGetCellState = function (field: tField, x: number, y: number): number {\n  const row = field[y];\n  if (row === undefined) {\n    return 0;\n  }\n  const cell = row[x];\n  if (cell === undefined) {\n    return 0;\n  }\n  return Number(cell);\n};\n","import { cellState } from \"./types\";\n\nfunction isAlive(currentCellState: number): boolean {\n  return currentCellState === cellState.ALIVE;\n}\nexport function getNewCellState(currentCellState: number, numOfAliveNeighbours: number): cellState {\n  if (numOfAliveNeighbours === 3 || (numOfAliveNeighbours === 2 && isAlive(currentCellState))) {\n    return cellState.ALIVE;\n  }\n\n  if (isAlive(currentCellState) && (numOfAliveNeighbours < 2 || numOfAliveNeighbours > 3)) {\n    return cellState.DOOMED;\n  }\n\n  return cellState.DEAD;\n}\n","/* eslint-disable no-param-reassign */\n\nimport { drawField } from \"./drawField\";\nimport { getNextState } from \"./getNextState\";\nimport { isAnyoneAlive } from \"./isAnyoneAlive\";\nimport { cellState, iOnCellClick, iRunInterval, tField, tRow } from \"./types\";\n\nconst DEFAULT_GAME_SPEED = 2000;\nconst GAME_MIN_SPEED = 1000;\nconst GAME_MIN_SIZE_COLS = 2;\nconst GAME_MIN_SIZE_ROWS = 2;\n\n/**\n * Создание игры Жизнь\n * @param cols {number} - число колонок\n * @param rows {number} - число строк\n * @param htmlElement {HTMLElement} - элемент, в котором будет отрисована игра\n * @returns void\n */\nexport function createGameOfLife(cols: number, rows: number, htmlElement: HTMLElement) {\n  let gameIsRunning = false;\n  let timer: number;\n  let sizeX = cols;\n  let sizeY = rows;\n\n  // Создать блок для поля\n  // Создать кнопку управления игрой\n  htmlElement.classList.add(\"game\");\n  htmlElement.innerHTML = `\n    \n    <div class=\"game__controls\">\n        <div class=\"game__controls-item\">\n          <label>\n            <input type=\"number\" min=\"${GAME_MIN_SPEED}\" step=\"1000\" class=\"game__speed\" value=\"${DEFAULT_GAME_SPEED}\"/>\n            game speed\n          </label>\n        </div>\n        <div class=\"game__controls-item\">\n          <label>\n            <input type=\"number\" min=\"${GAME_MIN_SIZE_ROWS}\" class=\"game__rows\" value=\"${sizeX}\"/>\n            rows\n          </label>\n        </div>\n        <div class=\"game__controls-item\">\n          <label>\n            <input type=\"number\" min=\"${GAME_MIN_SIZE_COLS}\" class=\"game__cols\" value=\"${sizeY}\"/>\n            cols\n          </label>\n        </div>\n        <div class=\"game__controls-item\">\n            <button class=\"game__random-fill-btn\">Random fill</button>\n        </div>\n        <div class=\"game__controls-item\">\n            <button class=\"game__run-btn\">Start</button>\n        </div>\n    </div>\n    <div class=\"game__field\"></div>\n    <hr>\n`;\n  const fieldWrapper = htmlElement.querySelector(\".game__field\") as HTMLElement;\n  const btnStart = htmlElement.querySelector(\".game__run-btn\") as HTMLButtonElement;\n  const btnRandomFill = htmlElement.querySelector(\".game__random-fill-btn\") as HTMLButtonElement;\n  const gameSpeedInput = htmlElement.querySelector(\".game__speed\") as HTMLInputElement;\n  const gameRowsInput = htmlElement.querySelector(\".game__rows\") as HTMLInputElement;\n  const gameColsInput = htmlElement.querySelector(\".game__cols\") as HTMLInputElement;\n\n  let field: tField = [];\n  for (let i = 0; i < sizeY; i++) {\n    const row: tRow = [];\n    for (let j = 0; j < sizeX; j++) {\n      row.push(0);\n    }\n    field.push(row);\n  }\n\n  const runInterval: iRunInterval = (speed: number): number => {\n    return Number(\n      setInterval(() => {\n        // В таймере обновления поля\n        // - посчитать новое состояние поля\n        // - отрисовать новое состояние поля\n        // - проверить, что есть живые клетки\n        // - если живых клеток нет\n        //    - остановить таймер\n        //    - вывести сообщение\n        field = getNextState(field);\n        drawField(fieldWrapper, field, cellClickHandler);\n        if (!isAnyoneAlive(field)) {\n          alert(\"Death on the block\");\n          stopGame();\n        }\n      }, speed)\n    );\n  };\n\n  const cellClickHandler: iOnCellClick = (x: number, y: number): void => {\n    field[y][x] = field[y][x] === cellState.DEAD ? cellState.ALIVE : cellState.DEAD;\n    drawField(fieldWrapper, field, cellClickHandler);\n  };\n\n  // Отрисовать поле заданного размера\n  drawField(fieldWrapper, field, cellClickHandler);\n  // При клике по ячейке поля\n  // - поменять его состояние\n  // - перерисовать поле\n  function stopGame(): void {\n    gameIsRunning = false;\n    btnStart.innerHTML = \"Start\";\n    // При клике на кнопке `Stop` остановить таймер\n    clearInterval(timer);\n  }\n\n  function startGame(): void {\n    // При клике по кнопке старт\n    // - поменять надпись на `Stop`\n    gameIsRunning = true;\n    btnStart.innerHTML = \"Stop\";\n    // - запустить таймер для обновления поля\n    const speed = parseInt(gameSpeedInput.value);\n    timer = runInterval(speed);\n  }\n\n  btnStart.addEventListener(\"click\", () => {\n    if (gameIsRunning) {\n      stopGame();\n    } else {\n      startGame();\n    }\n  });\n\n  btnRandomFill.addEventListener(\"click\", () => {\n    for (let i = 0; i < field.length; i++) {\n      for (let j = 0; j < field[i].length; j++) {\n        field[i][j] = Math.random() >= 0.5 ? 1 : 0;\n      }\n    }\n    drawField(fieldWrapper, field, cellClickHandler);\n  });\n\n  gameSpeedInput.addEventListener(\"change\", (e) => {\n    const target = e.target as HTMLInputElement;\n    const value = parseInt(target.value);\n    const min = parseInt(target.min);\n    if (value < min) {\n      target.value = `${min}`;\n    }\n\n    if (gameIsRunning) {\n      stopGame();\n      startGame();\n    }\n  });\n\n  gameRowsInput.addEventListener(\"change\", (e) => {\n    const target = e.target as HTMLInputElement;\n    let rows = parseInt(target.value);\n    const min = parseInt(target.min);\n    if (rows < min) {\n      rows = min;\n      target.value = `${min}`;\n    }\n\n    if (rows > field.length) {\n      for (let i = rows - sizeY; i > 0; i--) {\n        const row: tRow = [];\n        for (let j = 0; j < sizeX; j++) {\n          row.push(0);\n        }\n        field.push(row);\n      }\n    } else {\n      field.splice(rows - sizeY);\n    }\n\n    sizeY = rows;\n    drawField(fieldWrapper, field, cellClickHandler);\n  });\n\n  gameColsInput.addEventListener(\"change\", (e) => {\n    const target = e.target as HTMLInputElement;\n    let cols = parseInt(target.value);\n    const min = parseInt(target.min);\n    if (cols < min) {\n      cols = min;\n      target.value = `${min}`;\n    }\n\n    for (let i = 0; i < sizeY; i++) {\n      if (field[i].length < cols) {\n        field[i].push(0);\n      } else {\n        field[i].splice(cols - sizeX);\n      }\n    }\n    sizeX = cols;\n    drawField(fieldWrapper, field, cellClickHandler);\n  });\n}\n","import { getNumOfAliveNeighbours } from \"./getNumOfAliveNeighbours\";\nimport { getCellState } from \"./getCellState\";\nimport { getNewCellState } from \"./getNewCellState\";\nimport { iNextState, tField, tRow } from \"./types\";\n\n/**\n * получить новое состояние\n * @param field {number[][]} - состояние поля\n * @return number[][] - новое состояние поля\n */\nexport const getNextState: iNextState = function (field: tField): tField {\n  return field.map((row: tRow, rowIndex: number) =>\n    row.map((cell: number, cellIndex: number) => {\n      const an = getNumOfAliveNeighbours(cellIndex, rowIndex, field);\n      const currentState = getCellState(field, cellIndex, rowIndex);\n      return getNewCellState(currentState, an);\n    })\n  );\n};\n","import { getCellState } from \"./getCellState\";\nimport { cellState, iAliveNeighboursNum, tField } from \"./types\";\n\n/**\n * узнать сколько живых соседей вокруг клетки\n * @param column {number} - номер колонки\n * @param row {number} - номер строки\n * @param field {number[][]} - состояние поля\n * @return number - число живых соседей\n */\nexport const getNumOfAliveNeighbours: iAliveNeighboursNum = function (\n  column: number,\n  row: number,\n  field: tField\n): number {\n  let neighbours = 0;\n\n  for (let j = column - 1; j <= column + 1; j += 1) {\n    neighbours += getCellState(field, j, row - 1) === cellState.DEAD ? 0 : 1;\n  }\n\n  for (let j = column - 1; j <= column + 1; j += 1) {\n    neighbours += getCellState(field, j, row + 1) === cellState.DEAD ? 0 : 1;\n  }\n\n  neighbours += getCellState(field, column - 1, row) === cellState.DEAD ? 0 : 1;\n  neighbours += getCellState(field, column + 1, row) === cellState.DEAD ? 0 : 1;\n\n  return neighbours;\n};\n","import { tField, tRow } from \"./types\";\n\n/**\n * проверка что есть живые клетки\n * @param field {number[][]} - состояние поля\n * @return boolean\n */\nexport function isAnyoneAlive(field: tField): boolean {\n  for (let i = 0; i < field.length; i += 1) {\n    const row: tRow = field[i];\n    for (let j = 0; j < row.length; j += 1) {\n      const cell = row[j];\n      if (cell) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n","import \"../css/style.scss\";\nimport { createGameOfLife } from \"./createGameOfLife\";\n\nconst gameWrapper1 = document.createElement(\"div\");\nconst gameWrapper2 = document.createElement(\"div\");\n\ndocument.body.appendChild(gameWrapper1);\ndocument.body.appendChild(gameWrapper2);\n\ncreateGameOfLife(3, 3, gameWrapper1);\ncreateGameOfLife(10, 10, gameWrapper2);\n"],"names":["cellState","drawField","htmlElement","field","onCellClick","table","map","row","rowIndex","cell","columnIndex","y","state","ALIVE","DEAD","DOOMED","getCellCls","join","innerHTML","querySelector","addEventListener","ev","clickedElement","target","tagName","x","Number","getAttribute","getCellState","undefined","isAlive","currentCellState","createGameOfLife","cols","rows","timer","gameIsRunning","sizeX","sizeY","classList","add","fieldWrapper","btnStart","btnRandomFill","gameSpeedInput","gameRowsInput","gameColsInput","i","j","push","cellClickHandler","stopGame","clearInterval","startGame","speed","parseInt","value","setInterval","cellIndex","numOfAliveNeighbours","an","column","neighbours","getNumOfAliveNeighbours","getNextState","length","isAnyoneAlive","alert","runInterval","Math","random","e","min","splice","gameWrapper1","document","createElement","gameWrapper2","body","appendChild"],"sourceRoot":""}